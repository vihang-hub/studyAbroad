# ============================================================================
# Production Environment Configuration Template
# ============================================================================
# DO NOT store actual production secrets in this file
# Use Google Secret Manager for production secrets
# This template shows the structure for documentation purposes
# ============================================================================

# Environment Mode
ENVIRONMENT_MODE=production
NODE_ENV=production

# Application
APP_NAME=Study Abroad MVP
APP_VERSION=1.0.0
NEXT_PUBLIC_APP_URL=https://studyabroad.example.com
NEXT_PUBLIC_API_URL=https://api.studyabroad.example.com
API_URL=https://api.studyabroad.example.com
PORT=8080

# Database (Supabase - Production)
ENABLE_SUPABASE=true
# Secrets loaded from Google Secret Manager:
# SUPABASE_URL=projects/${PROJECT_ID}/secrets/SUPABASE_URL/versions/latest
# SUPABASE_ANON_KEY=projects/${PROJECT_ID}/secrets/SUPABASE_ANON_KEY/versions/latest
# SUPABASE_SERVICE_ROLE_KEY=projects/${PROJECT_ID}/secrets/SUPABASE_SERVICE_ROLE_KEY/versions/latest
# DATABASE_URL=projects/${PROJECT_ID}/secrets/DATABASE_URL/versions/latest
DATABASE_POOL_MAX=50
DATABASE_IDLE_TIMEOUT_MS=30000
DATABASE_CONNECTION_TIMEOUT_MS=2000

# Feature Flags
ENABLE_PAYMENTS=true
ENABLE_RATE_LIMITING=true
ENABLE_OBSERVABILITY=true

# Logging
LOG_LEVEL=error
LOG_DIR=/var/log/studyabroad
LOG_MAX_SIZE_MB=100
LOG_ROTATION_DAYS=1
LOG_RETENTION_DAYS=30
LOG_CONSOLE_ENABLED=false
LOG_PRETTY_PRINT=false

# Clerk Authentication (Production)
# Secrets loaded from Google Secret Manager:
# NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=projects/${PROJECT_ID}/secrets/CLERK_PUBLISHABLE_KEY/versions/latest
# CLERK_SECRET_KEY=projects/${PROJECT_ID}/secrets/CLERK_SECRET_KEY/versions/latest
# CLERK_WEBHOOK_SECRET=projects/${PROJECT_ID}/secrets/CLERK_WEBHOOK_SECRET/versions/latest
NEXT_PUBLIC_CLERK_SIGN_IN_URL=/sign-in
NEXT_PUBLIC_CLERK_SIGN_UP_URL=/sign-up
NEXT_PUBLIC_CLERK_AFTER_SIGN_IN_URL=/chat
NEXT_PUBLIC_CLERK_AFTER_SIGN_UP_URL=/chat

# Stripe Payment (Production - Live Mode)
# Secrets loaded from Google Secret Manager:
# NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=projects/${PROJECT_ID}/secrets/STRIPE_PUBLISHABLE_KEY/versions/latest
# STRIPE_SECRET_KEY=projects/${PROJECT_ID}/secrets/STRIPE_SECRET_KEY/versions/latest
# STRIPE_WEBHOOK_SECRET=projects/${PROJECT_ID}/secrets/STRIPE_WEBHOOK_SECRET/versions/latest
# STRIPE_PRICE_ID=projects/${PROJECT_ID}/secrets/STRIPE_PRICE_ID/versions/latest
PAYMENT_AMOUNT=2.99
PAYMENT_CURRENCY=GBP

# Gemini AI (Production)
# Secrets loaded from Google Secret Manager:
# GEMINI_API_KEY=projects/${PROJECT_ID}/secrets/GEMINI_API_KEY/versions/latest
GEMINI_MODEL=gemini-1.5-pro
GEMINI_MAX_TOKENS=8192
GEMINI_TEMPERATURE=0.7
GEMINI_TIMEOUT_MS=60000

# Rate Limiting (Production - Stricter)
RATE_LIMIT_MAX=100
RATE_LIMIT_WINDOW_SEC=60
RATE_LIMIT_REPORTS_PER_DAY=10

# ============================================================================
# Production Deployment Instructions
# ============================================================================

# 1. Create secrets in Google Secret Manager:
#    gcloud secrets create CLERK_SECRET_KEY --data-file=clerk_secret.txt
#    gcloud secrets create STRIPE_SECRET_KEY --data-file=stripe_secret.txt
#    gcloud secrets create GEMINI_API_KEY --data-file=gemini_api_key.txt
#    # ... repeat for all secrets

# 2. Grant Cloud Run service account access to secrets:
#    gcloud secrets add-iam-policy-binding CLERK_SECRET_KEY \
#      --member="serviceAccount:SERVICE_ACCOUNT@PROJECT_ID.iam.gserviceaccount.com" \
#      --role="roles/secretmanager.secretAccessor"

# 3. Deploy backend to Cloud Run:
#    gcloud run deploy studyabroad-backend \
#      --image gcr.io/PROJECT_ID/studyabroad-backend:latest \
#      --platform managed \
#      --region us-central1 \
#      --allow-unauthenticated \
#      --set-env-vars ENVIRONMENT_MODE=production \
#      --set-secrets CLERK_SECRET_KEY=CLERK_SECRET_KEY:latest,STRIPE_SECRET_KEY=STRIPE_SECRET_KEY:latest,GEMINI_API_KEY=GEMINI_API_KEY:latest \
#      --max-instances 100 \
#      --min-instances 1 \
#      --cpu 2 \
#      --memory 4Gi \
#      --timeout 300

# 4. Deploy frontend to Vercel:
#    vercel --prod
#    # Set environment variables in Vercel dashboard

# 5. Configure DNS:
#    - Point studyabroad.example.com to Vercel
#    - Point api.studyabroad.example.com to Cloud Run

# 6. Enable monitoring:
#    - Cloud Logging: Automatically enabled
#    - Cloud Monitoring: Set up alerts for error rates, latency
#    - Uptime checks: Configure for /health endpoint

# ============================================================================
# Secret Rotation Schedule
# ============================================================================

# API Keys: Rotate every 90 days
# Database Passwords: Rotate every 30 days
# Webhook Secrets: Rotate every 90 days
# JWT Signing Keys: Managed by Clerk (automatic rotation)

# ============================================================================
